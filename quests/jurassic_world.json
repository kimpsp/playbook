{
  "version": "1.1",
  "title": "Jurassic World: Escape",
  "author": "K1mps",
  "description": "Выживание на острове динозавров. Найдите способ сбежать!",
  "tags": ["приключение", "выживание", "динозавры"],
  "default_image": "img/default_scene.webp",
  "default_music": "sounds/default_theme.mp3",
  "music": "sounds/js_world_1.mp3",
  "startNode": "start",

  "inventory": [
    {
      "id": "map",
      "name": "Карта острова",
      "description": "Помогает ориентироваться в джунглях."
    },
    {
      "id": "drone",
      "name": "Дрон",
      "description": "Может передавать сигнал или отвлекать хищников."
    }
  ],

  "states": {
    "drone_active": false,
    "map_found": false
  },

  "nodes": {
    "start": {
      "image": "img/KNOAL0csSmujjVwX19M9IA.webp",
      "text": "Вы проснулись на заброшенном острове. Кругом — джунгли и звуки странных существ. Ваша задача — выжить и найти выход.",
      "choices": [
        {
          "text": "Пойти к пляжу",
          "next": "step_beach"
        },
        {
          "text": "Исследовать лагерь",
          "next": "step_camp"
        },
        {
          "text": "Стоять на месте",
          "next": "none_step"
        },
        {
          "text": "Ждать подмогу",
          "next": "wait_step"
        }
      ]
    },

    "step_beach": {
      "image": "covers/cover_q1.jpg",
      "text": "Вы дошли до пляжа. На песке видны следы... кто-то был здесь совсем недавно.",
      "choices": [
        {
          "text": "Пойти по следам",
          "next": "step_follow_tracks"
        },
        {
          "text": "Вернуться обратно",
          "next": "start"
        }
      ]
    },

    "step_camp": {
      "image": "covers/in_progress.jpg",
      "text": "Лагерь разрушен. Тут валяются обрывки карты. Возможно, это подскажет путь к спасению.",
      "choices": [
        {
          "text": "Взять карту и пойти",
          "next": "step_use_map",
          "actions": [
            {
              "type": "add_inventory",
              "item": "map"
            },
            {
              "type": "set_state",
              "state": "map_found",
              "value": true
            }
          ]
        },
        {
          "text": "Остаться и поискать еду",
          "next": "step_search_food"
        }
      ]
    },

    "step_follow_tracks": {
      "text": "Вы последовали по следам... И они привели вас к стаду трицератопсов. Выживайте!",
      "choices": [
        {
          "text": "Спрятаться за деревьями",
          "next": "step_hide"
        },
        {
          "text": "Бежать!",
          "next": "step_run"
        },
        {
          "text": "Использовать внезапный дрон",
          "next": "step_drone",
          "conditions": [
            {
              "type": "check_inventory",
              "item": "drone"
            }
          ]
        }
      ]
    },

    "step_use_map": {
      "text": "Карта указала на пещеру. Там, возможно, есть способ выбраться с острова.",
      "choices": [
        {
          "text": "Идти к пещере",
          "next": "step_cave"
        },
        {
          "text": "Остаться в лагере",
          "next": "step_camp"
        }
      ]
    },

    "step_search_food": {
      "text": "Вы нашли немного бананов, но внезапно — ЗА ГРИБАМИ НАПАЛ ДИНОЗАВР!",
      "choices": [
        {
          "text": "Убежать",
          "next": "step_run"
        },
        {
          "text": "Бросить бананы и отвлечь его",
          "next": "step_distraction"
        }
      ]
    },

    "step_hide": {
      "text": "Вы спрятались за деревьями. Удача на вашей стороне — животные не заметили вас.",
      "choices": [
        {
          "text": "Продолжить движение",
          "next": "step_cave"
        },
        {
          "text": "Вернуться назад",
          "next": "start"
        }
      ]
    },

    "step_run": {
      "text": "Вы бежали как могли, но попали в болото. Теперь вам нужно выбрать: плыть или ждать.",
      "choices": [
        {
          "text": "Плыть",
          "next": "step_swim"
        },
        {
          "text": "Ждать помощи",
          "next": "step_wait"
        }
      ]
    },

    "step_drone": {
      "text": "Дрон взлетел и начал передачу сигнала. Но он привлек внимание хищника...",
      "choices": [
        {
          "text": "Спустить дрон и бежать",
          "next": "step_escape",
          "actions": [
            {
              "type": "set_state",
              "state": "drone_active",
              "value": false
            }
          ]
        },
        {
          "text": "Оставить дрон и спрятаться",
          "next": "step_hide"
        }
      ]
    },

    "step_cave": {
      "text": "Вы вошли в пещеру. Там темно, но слышны странные звуки. Что делать?",
      "choices": [
        {
          "text": "Включить фонарик",
          "next": "step_flashlight"
        },
        {
          "text": "Осторожно идти в темноте",
          "next": "step_dark"
        }
      ]
    },

    "step_escape": {
      "text": "Дрон помог отвлечь внимание, и вы сумели скрыться. Но куда теперь?",
      "choices": [
        {
          "text": "Искать спасательный катер",
          "next": "step_boat"
        },
        {
          "text": "Вернуться в лагерь",
          "next": "step_camp"
        }
      ]
    },

    "step_boat": {
      "text": "Вы нашли катер! Он работает. Можно уплывать.",
      "choices": [
        {
          "text": "Уйти на катере",
          "next": "win"
        },
        {
          "text": "Подождать друзей",
          "next": "lose"
        }
      ]
    },

    "step_swim": {
      "text": "Вы поплыли через болото. Течение уносит вас в море. Вдали виден корабль!",
      "choices": [
        {
          "text": "Поплыть к кораблю",
          "next": "win"
        },
        {
          "text": "Вернуться назад",
          "next": "lose"
        }
      ]
    },

    "step_distraction": {
      "text": "Динозавр отвлёкся на бананы. Вы успели скрыться и нашли пещеру.",
      "choices": [
        {
          "text": "Идти в пещеру",
          "next": "step_cave"
        }
      ]
    },

    "step_flashlight": {
      "text": "Фонарик осветил путь. Вы нашли выход к берегу!",
      "choices": [
        {
          "text": "Идти к берегу",
          "next": "step_boat"
        }
      ]
    },

    "step_dark": {
      "text": "Вы споткнулись и упали. Шум привлёк хищника...",
      "choices": [
        {
          "text": "Бежать",
          "next": "lose"
        }
      ]
    },

    "none_step": {
      "text": "Вы стоите на месте. Внезапно на вас нападает динозавр!",
      "choices": [
        {
          "text": "Бежать",
          "next": "step_run"
        }
      ]
    },

    "wait_step": {
      "text": "Вы ждёте подмогу, но никто не приходит. Наступает ночь...",
      "choices": [
        {
          "text": "Искать укрытие",
          "next": "step_cave"
        }
      ]
    },

    "win": {
      "text": "Вы успешно покинули остров. Спасённые динозавры тоже оказались на борту. Поздравляем!",
      "choices": [
        {
          "text": "Вернуться на главную",
          "next": "home"
        }
      ]
    },

    "lose": {
      "text": "Вы не справились с испытаниями острова... Конец.",
      "choices": [
        {
          "text": "Начать заново",
          "next": "start"
        },
        {
          "text": "Вернуться на главную",
          "next": "home"
        }
      ]
    },

    "home": {
      "text": "Вы вернулись на главную страницу. Выберите новое приключение!",
      "choices": []
    }
  }
}
