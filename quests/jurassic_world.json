{
  "version": "1.2",
  "title": "Jurassic World: Escape",
  "author": "K1mps",
  "description": "Вы оказались на заброшенном острове, населённом динозаврами. Ваша цель — выжить и найти способ сбежать!",
  "tags": ["приключение", "выживание", "динозавры", "квест"],
  "default_image": "img/default_scene.webp",
  "default_music": "sands/default_theme.mp3",
  "music": "sounds/js_world_1.mp3",
  "startNode": "start",

  "inventory": [
    {
      "id": "map",
      "name": "Карта острова",
      "description": "Помогает ориентироваться в джунглях и находить ключевые точки."
    },
    {
      "id": "drone",
      "name": "Дрон",
      "description": "Может передавать сигнал или отвлекать хищников."
    },
    {
      "id": "key",
      "name": "Ключ от катера",
      "description": "Нужен, чтобы запустить спасательный катер."
    },
    {
      "id": "food",
      "name": "Еда",
      "description": "Восстанавливает силы."
    }
  ],

  "states": {
    "drone_active": false,
    "map_found": false,
    "key_found": false,
    "food_found": false,
    "drone_used": false,
    "health": 100
  },

  "nodes": {
    "start": {
      "image": "img/start_scene.webp",
      "text": "Вы просыпаетесь на пляже заброшенного острова. Вокруг — джунгли, а вдали слышатся странные звуки. Ваша задача — выжить и найти способ сбежать с острова.",
      "choices": [
        {
          "text": "Исследовать джунгли",
          "next": "jungle"
        },
        {
          "text": "Осмотреть пляж",
          "next": "beach"
        },
        {
          "text": "Остаться на месте и подождать помощи",
          "next": "wait_for_help"
        }
      ]
    },

    "jungle": {
      "image": "img/jungle_scene.webp",
      "text": "Вы вошли в густые джунгли. Ветви деревьев закрывают солнце, а звуки динозавров становятся громче. Что делать?",
      "choices": [
        {
          "text": "Искать следы людей",
          "next": "find_tracks"
        },
        {
          "text": "Поискать еду",
          "next": "search_food"
        },
        {
          "text": "Вернуться на пляж",
          "next": "beach"
        }
      ]
    },
    "search_food": {
  "image": "img/food_scene.webp",
  "text": "Вы нашли немного фруктов и ягод. Они выглядят съедобными, но кто знает, что ещё может быть в этих джунглях?",
  "choices": [
    {
      "text": "Собрать еду",
      "next": "collect_food",
      "actions": [
        {
          "type": "add_inventory",
          "item": "food"
        },
        {
          "type": "set_state",
          "state": "food_found",
          "value": true
        }
      ]
    },
    {
      "text": "Оставить всё как есть",
      "next": "jungle"
    }
  ]
},

  "collect_food": {
    "text": "Вы собрали еду. Теперь у вас есть силы, чтобы построить плот или продолжить поиски.",
    "choices": [
      {
        "text": "Вернуться в джунгли",
        "next": "jungle"
      },
      {
        "text": "Пойти на пляж",
        "next": "beach"
      }
    ]
  },
    "beach": {
      "image": "img/beach_scene.webp",
      "text": "Вы на пляже. Волны тихо плещутся о берег, а на песке видны следы. Возможно, здесь есть что-то полезное.",
      "choices": [
        {
          "text": "Искать предметы на пляже",
          "next": "search_beach"
        },
        {
          "text": "Попробовать построить плот",
          "next": "build_raft",
          "conditions": [
            {
              "type": "check_inventory",
              "item": "food",
              "value": true
            }
          ]
        },
        {
          "text": "Вернуться в джунгли",
          "next": "jungle"
        }
      ]
    },

    "wait_for_help": {
      "image": "img/wait_scene.webp",
      "text": "Вы решили остаться на месте и ждать помощи. Ночь приближается, и звуки динозавров становятся всё громче...",
      "choices": [
        {
          "text": "Попробовать разжечь костёр",
          "next": "make_fire"
        },
        {
          "text": "Спрятаться в кустах",
          "next": "hide_in_bushes"
        }
      ]
    },

    "find_tracks": {
      "image": "img/tracks_scene.webp",
      "text": "Вы нашли следы людей! Они ведут к разрушенному лагерю. Возможно, там есть что-то полезное.",
      "choices": [
        {
          "text": "Исследовать лагерь",
          "next": "explore_camp"
        },
        {
          "text": "Вернуться на пляж",
          "next": "beach"
        }
      ]
    },

    "search_food": {
      "image": "img/food_scene.webp",
      "text": "Вы нашли немного фруктов и ягод. Они выглядят съедобными, но кто знает, что ещё может быть в этих джунглях?",
      "choices": [
        {
          "text": "Собрать еду",
          "next": "collect_food",
          "actions": [
            {
              "type": "add_inventory",
              "item": "food"
            },
            {
              "type": "set_state",
              "state": "food_found",
              "value": true
            }
          ]
        },
        {
          "text": "Оставить всё как есть",
          "next": "jungle"
        }
      ]
    },

    "search_beach": {
      "image": "img/search_beach_scene.webp",
      "text": "Вы нашли обломки старого плота и ржавый ключ. Возможно, это ключ от катера?",
      "choices": [
        {
          "text": "Взять ключ",
          "next": "take_key",
          "actions": [
            {
              "type": "add_inventory",
              "item": "key"
            },
            {
              "type": "set_state",
              "state": "key_found",
              "value": true
            }
          ]
        },
        {
          "text": "Оставить ключ на месте",
          "next": "beach"
        }
      ]
    },

    "explore_camp": {
      "image": "img/camp_scene.webp",
      "text": "Лагерь разрушен, но здесь лежит карта острова и дрон. Карта может помочь найти выход, а дрон — подать сигнал бедствия.",
      "choices": [
        {
          "text": "Взять карту",
          "next": "take_map",
          "actions": [
            {
              "type": "add_inventory",
              "item": "map"
            },
            {
              "type": "set_state",
              "state": "map_found",
              "value": true
            }
          ]
        },
        {
          "text": "Взять дрон",
          "next": "take_drone",
          "actions": [
            {
              "type": "add_inventory",
              "item": "drone"
            }
          ]
        },
        {
          "text": "Вернуться на пляж",
          "next": "beach"
        }
      ]
    },

    "take_map": {
      "text": "Вы взяли карту. Теперь вы знаете, где находится пещера с катером!",
      "choices": [
        {
          "text": "Идти к пещере",
          "next": "go_to_cave"
        },
        {
          "text": "Вернуться в лагерь",
          "next": "explore_camp"
        }
      ]
    },

    "take_drone": {
      "text": "Вы взяли дрон. Теперь вы можете использовать его для подачи сигнала бедствия.",
      "choices": [
        {
          "text": "Запустить дрон",
          "next": "launch_drone",
          "conditions": [
            {
              "type": "check_state",
              "state": "drone_used",
              "value": false
            }
          ]
        },
        {
          "text": "Вернуться в лагерь",
          "next": "explore_camp"
        }
      ]
    },

    "launch_drone": {
      "text": "Дрон взлетел и начал передавать сигнал. Но шум привлёк внимание хищника!",
      "choices": [
        {
          "text": "Спрятаться",
          "next": "hide_from_predator",
          "actions": [
            {
              "type": "set_state",
              "state": "drone_used",
              "value": true
            }
          ]
        },
        {
          "text": "Бежать к пещере",
          "next": "run_to_cave",
          "actions": [
            {
              "type": "set_state",
              "state": "drone_used",
              "value": true
            }
          ]
        }
      ],
      "conditions": [
        {
          "type": "check_state",
          "state": "drone_used",
          "value": false
        }
      ]
    },

    "go_to_cave": {
      "image": "img/cave_scene.webp",
      "text": "Вы нашли пещеру. Внутри темно, но слышны странные звуки. Карта показывает, что катер спрятан здесь.",
      "choices": [
        {
          "text": "Использовать фонарик",
          "next": "use_flashlight"
        },
        {
          "text": "Идти в темноте",
          "next": "walk_in_dark"
        }
      ]
    },

    "use_flashlight": {
      "text": "Фонарик осветил путь. Вы нашли катер! Но чтобы его запустить, нужен ключ.",
      "choices": [
        {
          "text": "Использовать ключ",
          "next": "use_key",
          "conditions": [
            {
              "type": "check_inventory",
              "item": "key",
              "value": true
            }
          ]
        },
        {
          "text": "Вернуться на пляж за ключом",
          "next": "beach"
        }
      ]
    },

    "use_key": {
      "text": "Вы вставили ключ, и катер заработал! Теперь можно уплывать с острова.",
      "choices": [
        {
          "text": "Уплыть на катере",
          "next": "win"
        }
      ]
    },

    "walk_in_dark": {
      "text": "Вы споткнулись и упали. Шум привлёк хищника! Вам не удалось сбежать...",
      "choices": [
        {
          "text": "Начать заново",
          "next": "start"
        }
      ]
    },

    "hide_from_predator": {
      "text": "Вы спрятались, и хищник прошёл мимо. Но теперь вы потеряли дрон...",
      "choices": [
        {
          "text": "Вернуться в лагерь",
          "next": "explore_camp"
        }
      ]
    },

    "run_to_cave": {
      "text": "Вы добежали до пещеры, но хищник преследует вас! Вам нужно быстро найти выход.",
      "choices": [
        {
          "text": "Использовать карту",
          "next": "use_map_in_cave",
          "conditions": [
            {
              "type": "check_inventory",
              "item": "map",
              "value": true
            }
          ]
        },
        {
          "text": "Попробовать найти выход наугад",
          "next": "random_exit"
        }
      ]
    },

    "use_map_in_cave": {
      "text": "Карта помогла вам быстро найти катер. Теперь нужно запустить его!",
      "choices": [
        {
          "text": "Использовать ключ",
          "next": "use_key",
          "conditions": [
            {
              "type": "check_inventory",
              "item": "key",
              "value": true
            }
          ]
        },
        {
          "text": "Вернуться на пляж за ключом",
          "next": "beach"
        }
      ]
    },

    "random_exit": {
      "text": "Вы заблудились в пещере и не смогли найти выход. Ваши силы на исходе...",
      "choices": [
        {
          "text": "Начать заново",
          "next": "start"
        }
      ]
    },

    "make_fire": {
      "text": "Вы разожгли костёр. Это отпугнуло хищников, но теперь вы привлекаете внимание других динозавров!",
      "choices": [
        {
          "text": "Попробовать сбежать",
          "next": "run_from_fire"
        },
        {
          "text": "Остаться у костра",
          "next": "stay_by_fire"
        }
      ]
    },

    "run_from_fire": {
      "text": "Вы сбежали от костра и нашли пещеру. Теперь нужно найти катер!",
      "choices": [
        {
          "text": "Идти в пещеру",
          "next": "go_to_cave"
        }
      ]
    },

    "stay_by_fire": {
      "text": "Вы остались у костра, но динозавры окружили вас. Выжить не удалось...",
      "choices": [
        {
          "text": "Начать заново",
          "next": "start"
        }
      ]
    },

    "hide_in_bushes": {
      "text": "Вы спрятались в кустах. Хищники прошли мимо, но вы потеряли ориентацию. Теперь вам нужно найти дорогу обратно.",
      "choices": [
        {
          "text": "Искать дорогу к лагерю",
          "next": "find_camp_again"
        },
        {
          "text": "Попробовать найти пляж",
          "next": "find_beach_again"
        }
      ]
    },

    "find_camp_again": {
      "text": "Вы нашли лагерь. Теперь можно продолжить поиски.",
      "choices": [
        {
          "text": "Исследовать лагерь",
          "next": "explore_camp"
        }
      ]
    },

    "find_beach_again": {
      "text": "Вы вернулись на пляж. Теперь можно попробовать построить плот или искать ключ.",
      "choices": [
        {
          "text": "Искать предметы на пляже",
          "next": "search_beach"
        },
        {
          "text": "Попробовать построить плот",
          "next": "build_raft",
          "conditions": [
            {
              "type": "check_inventory",
              "item": "food",
              "value": true
            }
          ]
        }
      ]
    },

    "build_raft": {
      "text": "Вы построили плот из обломков. Теперь можно попробовать уплыть с острова!",
      "choices": [
        {
          "text": "Уплыть на плоту",
          "next": "raft_escape"
        },
        {
          "text": "Остаться и поискать лучший способ",
          "next": "beach"
        }
      ]
    },

    "raft_escape": {
      "text": "Вы уплыли на плоту, но он начал разваливаться. Вдали вы видите спасательный корабль, но не уверены, успеете ли доплыть...",
      "choices": [
        {
          "text": "Попробовать доплыть до корабля",
          "next": "win"
        },
        {
          "text": "Вернуться на остров",
          "next": "lose"
        }
      ]
    },

    "win": {
      "image": "img/win_scene.webp",
      "text": "Поздравляем! Вы успешно сбежали с острова. Ваше приключение закончилось победой!",
      "choices": [
        {
          "text": "Начать заново",
          "next": "start"
        }
      ]
    },

    "lose": {
      "image": "img/lose_scene.webp",
      "text": "К сожалению, вам не удалось сбежать с острова. Попробуйте ещё раз!",
      "choices": [
        {
          "text": "Начать заново",
          "next": "start"
        }
      ]
    }
  }
}
